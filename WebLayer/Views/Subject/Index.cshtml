@model WebLayer.ViewModel.Subject.IndexViewModel[]

<div>
    <button class="btn btn-primary mb-3" onclick="OpenPopup('@Url.Action("Add", "Subject")')"> Add Subject </button>
    <ul class="list-group list-group-flush" id="parentNode">
        @* new element will added here *@
    </ul>
</div>

<script>

    var subjectList = ajaxLoadSujext();

    function ajaxLoadSujext() {
        $.ajax({
            type: "POST",
            url: '@Url.Action("SubjectList", "Subject")',
            data: null,
            success: function (response) {
                loadList(response.data)
            }
        });
        return true;
    };
    function loadList(data) {
        var parentNode = document.querySelector("#parentNode");
        // need only one child element to add list before
        while (parentNode.childElementCount) {
            parentNode.removeChild(parentNode.childNodes[0]);
        }
        data.forEach(element => {
            let li = document.createElement('li');
            li.innerText = element.name;
            // <li class="list-group-item d-flex justify-content-between align-items-start">
            li.classList.add("list-group-item", "d-flex", "justify-content-between", "align-items-start");

            let span = document.createElement("span");
            span.classList.add("badge", "bg-danger", "btn", "rounded-pill");
            span.setAttribute("onclick", "OpenPopup('@Url.Action("Delete", "Subject")/subjectId="+ element.subjectId + "')");
            span.innerHTML = "Delete";
            li.appendChild(span);
            parentNode.appendChild(li);
        });
    }
</script>

@section Scripts {
@*Send validation to layout*@
@{
await Html.RenderPartialAsync("_ValidationScriptsPartial");
}
}